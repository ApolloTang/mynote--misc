

Unix, Windows, and MAC all use different end of line (EOL) character.

Vim typically figures out the fileformat for you automatically.

A file contains only:

  \r\n  --> dos
  \r    --> clasical mac
  \n    --> unix/mac

Mixed-EOL:

  When a file contains BOTH \r\n and \n linefeeds:

    \r\n + \n

  Vim declares it as a UNIX file and displays the ^M (\r) characters.

  These mixed-EOL files happened because different stuff edited
  in different editors: some editors only save the lines actually
  changed converting only part of the file to DOS-style or MAC-style
  line endings. This also happens with files generated by user-written
  programs if a consistent mechanism for line termination isn't
  used


Here is the trick to remove all the ^M's.

You must be in command mode (From normal mode and press :(colon) to enter command mode)

    set fileformat=mac

Save and restart Vim for the changes to take effect. (simply refreshing does
not work. I don't know why)


file-content:
    aaaaaaaaaa\r\n
    aaaaaaaaaa\r\n

buffer-content:
    aaaaaaaaaa\r\n
    aaaaaaaaaa\r\n

display ff=unix, ffs=unix
    aaaaaaaaaa^M[eol]
    aaaaaaaaaa^M[eol]

in the above ^M is \r which is [eol for mac] will be saved as \r

file-content, saved with ff=mac
    aaaaaaaaaa\r
    aaaaaaaaaa\r


ref http://cs.clarku.edu/resources/vim.shtml





